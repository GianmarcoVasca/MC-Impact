<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MC-Impact • Interfaccia</title>
    <style>
      body { font-family: system-ui, Arial, sans-serif; margin: 2rem; }
      .card { border: 1px solid #ddd; border-radius: 8px; padding: 1rem; max-width: 720px; }
      .row { margin-bottom: 0.75rem; }
      label { display: block; font-weight: 600; margin-bottom: 0.25rem; }
      input[type="file"], input[type="number"] { width: 100%; }
      .hint { color: #555; font-size: 0.9rem; }
      .actions { margin-top: 1rem; }
      button { padding: 0.6rem 1rem; border: 0; border-radius: 6px; background: #2c7be5; color: #fff; cursor: pointer; }
      .flash { padding: .75rem; margin-bottom: 1rem; border-radius: 6px; }
      .flash.error { background: #fee; color: #900; border: 1px solid #f99; }
    </style>
  </head>
  <body>
    <h1>MC-Impact — Interfaccia Web</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash {{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="card">
      <form action="{{ url_for('run') }}" method="post" enctype="multipart/form-data">
        <div class="row">
          <label>
            <input type="checkbox" name="use_defaults" {% if defaults.has_default_dati and defaults.has_default_targets %}checked{% endif %}>
            Usa i file predefiniti del progetto (dati.txt, targets.txt)
          </label>
          <div class="hint">Percorso: cartella del progetto</div>
        </div>

        <div class="row">
          <label for="dati">Oppure carica un dati.txt</label>
          <input type="file" id="dati" name="dati_file" accept=".txt" />
        </div>
        <div class="row">
          <label for="targets">Oppure carica un targets.txt</label>
          <input type="file" id="targets" name="targets_file" accept=".txt" />
        </div>

        <div class="row">
          <label for="N">(Opzionale) Override di N iterazioni</label>
          <input type="number" id="N" name="N" min="1" step="1" placeholder="Lascia vuoto per usare N da dati.txt" />
        </div>


        <div class="actions">
          <button type="submit">Esegui Monte Carlo</button>
        </div>
      </form>
    </div>

  </body>
  </html>
